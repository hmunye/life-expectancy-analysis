---
title: "Report Draft"
format: html
editor: visual
author: Group 5
---

# Table of Contents

-   **1 Introduction**

    -   1.1 Data Understanding

    -   1.2 Data Source

-   **2 Data Loading**

    -   2.1 Importing Libraries

    -   2.2 Loading & Understanding the Data

    -   2.3 Categorizing Datasets Attributes

-   **3 Data Cleaning**

    -   3.1 Handling Null Values

        -   3.1.1 Treating Null Values

        -   3.1.2 Decision for Treating Null Values

        -   3.1.3 Approach

    -   3.2 Handling Outliers

        -   3.2.1 Treating Outliers

        -   3.2.2 Decision for Treating Outliers

        -   3.2.3 Approach

-   **4 Data Analysis**

    -   4.1 Plots

    -   4.2 Variance Analysis

    -   4.3 Covariance Analysis

-   **5 Final Conclusions**

    -   5.1 Variance Analysis

    -   5.2 Covariance Analysis

## 1 Introduction

This dataset includes comprehensive information on 179 countries spanning from 2000 to 2015, covering aspects like life expectancy, health indicators, immunization rates, and economic and demographic data. Originally sourced from Kaggle, it underwent updates to rectify inaccuracies and missing values. Population, GDP, and life expectancy figures were updated from World Bank data, while data on vaccinations, alcohol consumption, BMI, HIV rates, mortality, and other health metrics were sourced from the World Health Organization. Additional information on schooling was gathered from the University of Oxford's Our World in Data project. Missing values were addressed using strategies such as filling with the closest three-year average or the regional average. Countries with significant missing data were excluded, and the remaining countries were categorized based on their Gross National Income per capita into developed vs developing economies, following guidelines from organizations like the World Trade Organization and the UN.

#### 1.1 Data Understanding

Columns in the dataset:

-   **Country:** List of the 179 countries

-   **Region:** 179 countries are distributed in 9 regions. E.g. Africa, Asia, Oceania, European Union, Rest of Europe and etc.

-   **Year:** Years observed from 2000 to 2015

-   **Infant_deaths:** Represents infant deaths per 1000 population

-   **Under_five_deaths:** Represents deaths of children under five years old per 1000 population

-   **Adult_mortality:** Represents deaths of adults per 1000 population

-   **Alcohol_consumption:** Represents alcohol consumption that is recorded in liters of pure alcohol per capita with 15+ years old

-   **Hepatitis_B:** Represents % of coverage of Hepatitis B (HepB3) immunization among 1-year-olds

-   **Measles:** Represents % of coverage of Measles containing vaccine first dose (MCV1) immunization among 1-year-olds

-   **BMI:** BMI is a measure of nutritional status in adults. It is defined as a person's weight in kilograms divided by the square of that person's height in meters (kg/m2)

-   **Polio:** Represents % of coverage of Polio (Pol3) immunization among 1-year-olds

-   **Diphtheria:** Represents % of coverage of Diphtheria tetanus toxoid and pertussis (DTP3) immunization among 1-year-olds

-   **Incidents_HIV:** Incidents of HIV per 1000 population aged 15-49

-   **GDP_per_capita:** GDP per capita in current USD

-   **Population_mln:** Total population in millions

-   **Thinness_ten_nineteen_years:** Prevalence of thinness among adolescents aged 10-19 years. BMI \< -2 standard deviations below the median

-   **Thinness_five_nine_years:** Prevalence of thinness among children aged 5-9 years. BMI \< -2 standard deviations below the median

-   **Schooling:** Average years that people aged 25+ spent in formal education

-   **Economy_status_Developed:** Developed country

-   **Economy_status_Developing:** Developing county

-   **Life_expectancy:** Average life expectancy of both genders in different years from 2010 to 2015

#### 1.2 Data Source

Original dataset can be found here: <https://www.kaggle.com/datasets/lashagoch/life-expectancy-who-updated>

For ease of use we have re-uploaded the dataset to this Github repository created for this group project:

<https://raw.githubusercontent.com/hmunye/life-expectancy-analysis/main/data/Life-Expectancy-Data-Updated.csv>

## 2 Data Loading

#### 2.1 Importing Libraries

```{r}
library(tidyverse)

```

#### 2.2 Loading and Understanding the Data

Load the dataset from our groups github.

```{r}

data <- read_csv("https://raw.githubusercontent.com/hmunye/life-expectancy-analysis/main/data/Life-Expectancy-Data-Updated.csv", show_col_types = FALSE)

```

Display the first 5 rows of the dataset

```{r}
head(data, 5)
```

The shape of the data frame

```{r}
# Get the number of rows
num_rows <- nrow(data)

# Get the number of columns
num_cols <- ncol(data)

# Print the results
cat("Number of rows:", num_rows, "\n")
cat("Number of columns:", num_cols, "\n")
```

Summary of the Data Frame

```{r}
summary(data)

```

#### 2.3 Categorizing the Datasets Attributes

-   Categorical (Nominal):

    -   Country

    -   Region

    -   Economic Status

-   Numerical (Nominal):

    -   None

-   Numerical (Discrete):

    -   Year

    -   Infant Deaths

    -   Under-Five deaths

-   Numerical (Interval)

    -   BMI

-   Numerical (Ratio)

    -   Life Expectancy
    -   Adult Mortality
    -   Alcohol Consumption
    -   Hepatitis B
    -   Measles
    -   Polio
    -   Diphtheria
    -   HIV/AIDS
    -   GDP
    -   Population
    -   Thinness 5-9
    -   Thinness 10-19
    -   Schooling

-   Put Reasoning here (Why each is what it is)

    -   **Someone please double check me.**

------------------------------------------------------------------------

Creating a list of all nominal/factors

Regions

```{r}
data |>
distinct(Region)
```

Country

```{r}
data |>
  distinct(Country)
```

Year

```{r}
data |>
distinct(Year)
```

For the purpose of analaysis in R Studio, it is a good practice to change the categorical variables into factors

```{r}
data$Country <- factor(data$Country)
data()$Region <- factor(data$Region)
data$Year <- factor(data$Year)

glimpse(data)
```

## 3 Data Cleaning

### 3.1 Handling Null Values

The original data set had several hundred missing values. While the data is publicly available as it is all published by the various nations of the world and the World Heath Organization , it is not feasible with our teams man hours to manually enter each missing value.

**Number of Missing Values:**

Life Expectancy: 10

Adult Morality: 10

Infant Deaths: 0

Alcohol: 194

Hepatitis B: 553

Measles: 0

BMI: 34

Under-five deaths: 0

Polio: 19

Diphtheria: 19

HIV/AIDS: 0

GDP: 448

Population: 652

Thinness 10-19 : 34

Thinness 5-9: 34

Schooling: 163

#### 3.1.1 Treating Null Values

1\) Delete the row: Possible for datasets with small number of NA's, sadly that is not our dataset.

2\) Fill in with mean/median/mode: For numerical columns, which all of are missing values are, it is possible to calculate the mean, median, or mode of the dataset and replace the missing values with one them.

#### 3.1.2 Decision for Treating Null Values

When doing research on how to handle the missing values, Our group leader found a data set that has already "fixed" the missing values. This new data set first grouped each country into regions, from there the average value of each column was found by region. This is a very clean way to ensure that different regions do not effect each other, while still filling in the missing values.

#### 3.1.3 Approach

The group moved forward with the "Fixed" dataset.

### 3.2 Handling Outliers

**Writing Function to find Number of Outliers:**

```{r}
num_outliers <- function(data_set, column) {
  q1 <- quantile(column, 0.25)
  q3 <- quantile(column, 0.75)
  iqr <- q3 -q1
  
  upper_bound <- q3 + 1.5 * iqr
  lower_bound <- q1 - 1.5 * iqr
  
  outliers <- column[column < lower_bound | column > upper_bound]
  
  return(length(outliers))
}
```

**Number of Outliers:**

Life Expectancy: 19

Adult Mortality: 112

Alcohol Consumption: 2

Hepatitis B: 164

Measles: 35

Polio: 190

Diphtheria: 187

HIV/AIDS: 461

GDP: 425

Population: 362

Thinness Five-Nine: 95

Thinness Ten-Nineteen: 89

Schooling: 0

BMI: 25

Year:

Infant Deaths: 29

Under-Five deaths: 102

#### 3.2.1 Treating Outliers

#### 3.2.2 Decision for Treating Outliers

#### 3.2.3 Approach

## 4 Data Analysis

#### 4.1 Plots

#### 4.2 Variance Analysis

#### 4.3 Covariance Analysis

Life Expectancy:

```{r}
data |>
  ggplot(aes(y = Life_expectancy, x = Adult_mortality, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Infant_deaths, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Under_five_deaths, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Alcohol_consumption, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Hepatitis_B, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Measles,color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x =  BMI, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Polio, color = Region)) +
  geom_point()


data |>
  ggplot(aes(y = Life_expectancy, x = Diphtheria, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Incidents_HIV, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = GDP_per_capita, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Life_expectancy, x = Population_mln, color = Region))   +
  geom_point()
  
  data |>
  ggplot(aes(y = Life_expectancy, x = Thinness_ten_nineteen_years, color = Region)) +
  geom_point()
  
  data |>
  ggplot(aes(y = Life_expectancy, x = Thinness_five_nine_years, color = Region))   +
  geom_point()
  
  data |>
  ggplot(aes(y = Life_expectancy, x = Schooling, color = Region))   +
  geom_point()
```

Alcohol

```{r}
data |>
  ggplot(aes(y = Alcohol_consumption, x = Adult_mortality, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Infant_deaths, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Hepatitis_B, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Measles, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = BMI, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Polio, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Diphtheria, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Incidents_HIV, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = GDP_per_capita, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Population_mln, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Alcohol_consumption, x = Schooling, color = Region)) +
  geom_point()
```

GDP

```{r}
data |>
  ggplot(aes(y = GDP_per_capita, x = Adult_mortality, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Life_expectancy, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Infant_deaths, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Under_five_deaths, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Alcohol_consumption, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Hepatitis_B, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Adult_mortality, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Hepatitis_B, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = Population_mln, x = Adult_mortality, color = Region)) +
  geom_point()

data |>
  ggplot(aes(y = GDP_per_capita, x = Schooling, color = Region)) +
  geom_point()
```

## 5 Final Conclusions

#### 5.1 Variance Analysis

#### 5.2 Covariance Analysis
